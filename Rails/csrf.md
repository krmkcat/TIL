# CSRFについて
## CSRFとは
 - クロスサイトリクエストフォージェリの略。サイバー攻撃の一種
 - 無関係なサイト経由で標的サイトに悪意のあるHTTPリクエストを送り不正に操作する
 - 具体例含め詳細は下記リンク参照  
[Railsガイド](https://railsguides.jp/security.html#%E3%82%AF%25E%83%AD%E3%82%B9%E3%82%B5%E3%82%A4%E3%83%88%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%AA%EF%BC%88csrf%EF%BC%89)

## Railsにおける対策
- デフォルトで、GET以外のHTTPリクエストについては自サイトからのもの以外受け付けない設定になっている
- 自サイトからのリクエストであると証明するために、セキュリティトークンを利用する。このトークンが含まれるリクエストの場合のみサーバーに受け付けてもらえる
- Turboを使ってフォームを送信する場合、csrfメタタグを使ってトークンをリクエストに含めるため、レイアウトファイル内にcsrfメタタグ必須
- csrfメタタグの設置方法。以下のヘルパーメソッドをレイアウトファイルの `<head>`内に記述する
  ```erb
  <%= csrf_meta_tags %>
  ```

## 補足情報
- かなり突っ込んだ内容になりそうなため詳細は確認していないが、同じようなセキュリティ対策用のヘルパーメソッドとして、`csp_meta_tag`がある
- こちらもセットで記述しておいたほうが良さそう

## 雑なまとめ
特別な理由がない限り、Railsアプリケーションのレイアウトファイルは`<head>`内に以下のコードを書いておけ！
```erb
<head>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
</head>
```
