# ActiveRecord関連のTIPS

- ActiveRecordではモデルクラス名（`Post`など）を呼び出すだけで、そのモデルに関連する全てのレコードを取得するクエリを作ることができ、それ単体でActiveRecord::Relationとして振る舞う。ただこの場合は単にクエリを作成しただけで、データベースへの問い合わせは行われていない。  
実際にデータベースからデータを取得するには、その後に何かしらのメソッド（`all`や`where`など）をチェーンして呼び出す必要がある。メソッドが呼び出されて初めてDBへの問い合わせが行われる。

- モデルの属性の値からランダムでひとつ選んで返したい場合、`モデル名複数形.属性名複数形.value.sample`という書き方ができる

## UUIDについて
- Universally Unique IDentifierの略
- 通常のidだと単純すぎて色々推測できてしまうことがあるため、それを防ぐために規則性のないランダムで冗長なidを別に割り振り、パラメータ等に使っている
- `SecureRandom.uuid`で生成できる
- [参考リンク](https://zenn.dev/yusuke_docha/articles/1b162804f7ea12)

## `integer`型カラムの最小/最大値制約について
- テーブルレベルで制限をかけることはできないので、モデルのバリデーションで対応するのが基本
- カスタムのSQL文をマイグレーションファイルに記述し、チェック制約（CHECK constraint）というものを使用してDBレベルで制約を課すことはできるが、そもそもCHECK制約をサポートしていないDBもあるので注意