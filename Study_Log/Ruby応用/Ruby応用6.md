# 2024.1.20
ブランチOK。

今回のも内容自体は理解しやすいな。機能が多い場合は、分類して分割。1クラスあたりの情報（コード）量を減らす。

気になってた定数について調べた。  
- Rubyにおいてはアルファベット大文字で始まる識別子は定数とみなされる
- 定数はメソッドの中では定義できない
- 定義されていない定数にアクセスすると`NameError`が発生する
- 定数は定義されたクラス/モジュール定義の中や、そのクラスを継承しているクラス、そのモジュールをインクルードしているクラスやモジュールなどから参照できる
- クラス定義の外（トップレベル）で定義された定数は`Object`クラス所属扱いになる
- 定数を外部から呼び出すには`クラス名::定数名`とする

な〜るほど。これはあとでTILに投げとこう。

あと、ハッシュから値を取り出すときのキー指定で`@stocks[DrinkType::COKE]`って描き方してるのも気になる。キーをシンボルにしなくていいのか？調べてもいまいちわからなかったので後でロボランテくんに訊いてみる。  
今はとりあえず進める。

思ったんだけど、`require`のパス指定、`./ファイル名`で良くないか？なんでわざわざ"object_oriented"をつけてるんだ？これもあとで確認してみよう。

よしテスト通った。  
さっきのパスの問題、"object_oriented"はやっぱりないとだめだった。理由がわからんのでロボらんてくんに聞くことにする。  
ともあれまずはプルリクしてしまおう。

無事LGTM。さっきの疑問をロボらんてくんに訊いてみることにする。

ハッシュのキーについて。実はRubyではハッシュのキーとしてどんなオブジェクトも使えるんだそうだ。一般的に文字列やシンボルが使われることが多いだけで、整数やクラスのインスタンス、他のハッシュすらキーにできる。  
知らんかった〜！  
取り出すときにキーをシンボル（`:キー名`という形式）にしなきゃいけないのはあくまでキーにシンボルを指定してある場合のみであって、他の種類のオブジェクトを指定してあるならそのオブジェクトで取り出さなきゃいけないってことだな。  
たしかに文字列をキーにした場合は取り出すときも文字列使わなきゃだめってのは覚えがあるな…。シンボルばっかり使ってたから全然知らなかった。は〜。

よし、もう一つの疑問も投げてみよう。

ん〜ちょっとよくわからん。とりあえず今日はここまで。また明日さらに突っ込んでみよう。

# 2024.1.21
昨日解決しなかった疑問について、さらにロボらんてくんに訊いてみる。

やっぱり昨日の回答はおかしかったみたい。とはいえ正しい解説を聞いてもやっぱりなんでああなるのかはわからない…。

あったーこれだ〜！
- [【Ruby】requireで外部ファイルを読み込む](https://wild-outdoorlife.com/ruby/require/#toc4)
- [requireとrequire_relativeとloadの違いをまとめておく](https://zenn.dev/yukito0616/articles/e2f4b2ef94535d)


`require`に相対パスを渡す場合、そのファイルが属しているディレクトリではなくRubyコードを実行したディレクトリからの相対パス（厳密には`$LOAD_PATH`というグローバル変数）という意味になってしまうらしい。知らなかった〜！  
今回の場合はRuby応用のrootディレクトリから実行してるから、rootディレクトリからの相対パスを書かないとLoadErrorになると。  
外部ファイルを読み込んでるファイルからの相対パスで指定したければ、`require_relative`というメソッドを使うと良い。

よし、疑問も解決したしTILに色々投げて終わりにしよう。