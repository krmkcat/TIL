# 2024.2.16
ER図の作成に入る。これは実をいうとやや得意なので気が楽。  
まずは手描きでテーブル一覧だけ作ってみようかな。

だいたいできたけど、usersテーブルだけはLINEログインの仕様がわからんと書けないな。調べる。あと柊さんのGitHubも参考にさせてもらおう。

LINEログイン思ったより難しそうなんだけど…。これならパスワード変更機能自前で持ってでもメルアド＆パスワード方式のほうが良かったなあ。ちゃんと事前に調べるべきだった…。  
公式ドキュメント読んでも全然わからなかったから柊さんのコード見た。こういうことかな？っていう若干の予測はできたけどうーん…。  
RailsでLINEログイン使う方法をわかりやすく解説した記事がないかまず探してみる。  
最終運営に相談だなー。READMEのLGTM出た後だけど一部機能変更＆削除できますかって。

記事あった。なんとなくはわかって、単に実装するだけならできなくはないかなーとは思った。  
けどやっぱり色々気にしなきゃいけないことが多くて面倒そう…。できればメアドパス方式にしたい。相談してみようかな。

もし機能の内容変えられるとしたらやりたいのは以下。

- ログインをオーソドックスなメアドパス方式に変更
- 本リリース時点の機能から以下を削除
  - Googleアカウントでログイン
  - 検索結果をマップ上でピン表示
  - 情報リクエスト機能
  - フリーワード検索のオートコンプリート機能

あとは実装方針予定から上記に関連する項目を削除するって感じかな。  
うん、早速相談してみよう。土日入るから返信は月曜になるかな。それまでは仮にER図作って待とう。そう大きな変化はないはずだし。

OK運営相談室に投稿してきた。まあ普通に考えればだめだとは言われないはず。LGTM取り消してもらって出し直しか、場合によっては普通に続行してOKかもしれないな。

ともかく返信あるまではやれることをやっておく！会員登録＆ログインはメアドパス方式という前提でER図を作る。draw.ioでいいかな。慣れてるし。で、出来上がったものをGyazoでキャプチャして共有しよう。

# 2024.2.17
今日はまずER図の仮完成を目指して作っていく。もしそれが終わっちゃったら訂正版のREADMEと画面遷移図を用意しておこうかな。返信今日来るかな…来ると嬉しい。

テーブル設計でusersとprofilesを別々にするメリット・デメリットってなんなんだろうな。調べてみて決めよう。

Chat-GPTくんによると、users一本のメリットはDB構造がシンプルになることでデメリットは将来的にデータ拡張とか変更したくなったときにやりづらいこと。分けるメリット・デメリットはその逆って感じ。まあ予想通りだな。  
ユーザーに関してはそんなに複雑な情報もたせるつもりないから拡張性はいらんな。店舗情報とかレビューに関してはそうしといたほうがいいかもしれないけど。  
ということでユーザーのプロフィールはusersに含めることにする。

`password_confirmation`はDBじゃなくてフォームにあればいいんだっけ？すっかり忘れとるな…。前に自分が書いたコード見よ。

そうだなやっぱり。  
しかしパスワードリセット関連のカラムがけっこう多いな。やっぱりプロフィール分離させるべきか？そうしてみるか。

都道府県を単独でテーブル用意するかenumにするかで迷ったけど、enumは選択肢がせいぜい数個の場合にとどめたほうがいいなと思うのでやっぱりprefecturesテーブル作るます。

レーティング項目のネーミングが難しいな。こういうときChat-GPTは本当に頼りになる。  
やっぱ課金しちゃおうかなあ。月20ドルってことは約3千円程度だよね。そのくらいいっかという気がする…。  
課金した。ガンガン使ってこう。

さっそくレーティング項目のネーミングについて、これでいい？って相談してみた。  
たしかにより賢いわ…。こっちの意図を正確に汲んでくれてる。オリジナル用語も使いこなしてるし。すげー。  

今見てて思ったけど、カラム名の"_level"と日本語項目名の"〜度"はいらないな。

よし、できた！ユーザー認証をメルアド＆パスワードでやる前提ならこれでOKのハズ。  
いちおうsorcery周りでなにかほかにカラムが必要じゃないか確認しよう。

うん、現時点では特にいらんな。RememberMeとか使いたくなったらそのときに追加すればいいやろ。MVPリリース時点ではいらん。  
というか調べてみたらdeviseけっこうよさそう。楽そう。ちょっと心惹かれるけどまあ慣れないことはしないでおこう。いちおうREADME出し直しになった場合はsorceryもしくはdeviseって書いておくか。

さてどうしよう。ER図仮完成しちゃったな。例の件は少し時間かかるって言ってたからひょっとしたら週明けとかになるかも？  
一旦先に進んじゃうか、README出し直しと読んでそっちつくっとくか。  
ん〜〜とりあえず次の「issueベースの開発」読んでみて決めよう。

読んだ。これは後でいいな。とりあえず改訂版READMEと画面遷移図を作っておくことにしよう。  
整理すると、今やっておくべきこととしては

- READMEと画面遷移図の改訂版作る
- 大手カラオケチェーン（名古屋市内に店舗あるとこ）の利用規約確認
- ↑をもとにKIYACで相談（Lite会員になる）
- 「Issueベースの開発」準備

こんなとこだな。講師の判断待つ間にできるとこまでやっておこう。

今思ったけど学習ログ1本化したほうがいいなこれ。あとでまとめよう。とりあえず明日からは1本化した新しいファイルに記録していく。

そしてそう言ってる間に返信きたーー！そのまま進めて良いとのこと！よっしゃ！  
というか返信にあったのでMVPリリースのページ見てみたら、普通に計画変更あること前提だったわ。よかったー。

というわけで早速ER図提出する。

提出よし！時間的に今日中にはレビュー来ないかもだけど、来週中にLGTMが目標だしOK。これで明日は心置きなく映画見に行ける〜。

一旦休憩して、次のissueベースの開発に移ろうかな。

MVPリリースまでに直面するでかめのハードルとしては、

- インフラの選定・設定
- デプロイ
- 店舗情報を集める仕組みを作ること
- マルチ検索実装
- デザイン・フロント周り

あたりかな。こうして書き出してみればそこまで多いわけでもないな。なんとかなりそうな気がしてきた！

時間が中途半端だから今のうちに学習ログ1本化するか。