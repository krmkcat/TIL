# 「スラスラわかるJavaScript」メモ

## 文法関連や概念でRubyと違うところ
- 文末にセミコロンが必要
  - ブロックの後ろには不要
- `==`だと厳密ではない比較（文字列と数値で比較できてしまう）で、`===`だと厳密な比較（データ型が違えば`false`）なので、基本は`===`を使う
- ``で囲うとテンプレートリテラルになる。
  - テンプレートリテラルでは変数展開が使えるし改行がそのまま反映される
  - 変数展開は`${}`で囲う
- 文字列の中で改行したい場合は`\n`を改行箇所にいれる
- 1行コメントアウトするには行頭に`//`を付ける。複数行コメントアウトするには`/* */`で囲う
- 変数は`let`、定数は`const`で宣言する
  - 基本は`const`を使い、再代入が必要な場合のみ`let`を使うようにすると良い
- データ型について。`Null`型は"値として存在はするが中身が空"を表し、`Undefined`型は"まだ存在しない"ことを表す
- `Boolean 値`ですべての値が真偽値に変換できる
  - `null`、`undefined`、数値の`0`、空の文字列（`''`）は偽値
  - それ以外は真値
- インクリメント演算子`++`：値に1を加算する
- 関数：Rubyでいうメソッド
- オブジェクト：Rubyでいうインスタンス？
- オブジェクトのデータ型は`object`
- JSにおける"データ型"はRubyでいうクラスに近い？
- JSにおける"メソッド"とは、プロパティの値になっている（つまり特定のオブジェクトに紐づいている）関数のこと。Rubyでいうインスタンスメソッドにやや近い

## 条件分岐
- if文の書き方。`if (式) { trueの場合の処理 } else { falseの場合の処理 }`。もちろん`else`以降は省略可能
- `elsif`という句はない。`else if`と書く
- Rubyにおける`when`はJavaScriptだと`switch`
  - 以下のように書く
    ```js
    switch (変数) {
      case 値1:
        値1のときの処理;
        break;
      case 値2:
        値2のときの処理;
        break;
      ...
      default:
        どれにも当てはまらないときの処理
    }
    ```
  - `break`はそこで`switch`文を終了させるという意味。どれかに当てはまった時点で処理を抜けるために書く。Rubyの`when`と違い、これがないと以降の処理も（条件に当てはまるかどうかにかかわらず）実行されてしまう

## 繰り返し処理
### for
```js
for (初期化式; 継続式; 加算式) {
  処理;
}
```
- 回数を指定して繰り返したい場合に使う
- 初期化式：繰り返しを始める前に1回だけ実行される。ループカウンターを初期化する
- 継続式：処理の前に毎回評価される。これが`true`になる場合のみ処理が実行され、`false`になったらそこで繰り返しが終了する
- 加算式：処理の後に毎回実行される。ループカウンターの数字を増やす

### while
```js
while (条件式) {
  処理;
}
```
- 条件を満たすまで処理を繰り返したいときに使う
- 条件式の評価が`true`であるうちは処理が繰り返され、`false`になった時点で終了する

### for...of
```js
for (変数宣言 of 配列) {
  処理;
}
```
- Rubyでいう`each`
- 変数宣言は再代入するなら`let`、そうでなければ`const`で

### break
- 繰り返し処理を抜ける

## 関数の定義
```js
function 関数名(引数, ...) {
  処理;
  return 戻り値; // 必要なければ省略可
}
```

## 関数式
```js
const 変数（関数）名 = function (引数, ...) {
  処理;
  return 戻り値; // 必要なければ省略可
}
```
- 関数を宣言する方法の一つ
- 代入している名前のない関数のことを無名関数という
- DOMやJSにおける"メソッド"に関係しているらしい

## アロー関数式
```js
const 変数(関数)名 = (引数, ...) => {
  処理;
}
```
```js
// 波括弧とreturnを省略し1行で書くことも可能

const sample = (a) => {
  return a * 2
}
// これを、

const sample = (a) => a * 2;
// こう書くこともできる
```
- JSにおける"メソッド"は関数式で書く必要があり、アロー関数式は使えない

## オブジェクトの定義
```js
const 変数名 = {
  プロパティ名: 値,
  ...
}
```
- プロパティ名はキーともいう
- プロパティ=属性、カラムというイメージ

## プロパティへのアクセス
- 以下のどちらか
  - 変数名.プロパティ名
    - プロパティ名は変数名と同様の制約がある
    - 変数を使ったプロパティアクセスは不可
    - ただしこちらのほうが主流。基本はこっちを使う
  - 変数名[プロパティ名]
    - クォーテーションで囲まれたプロパティ名にアクセス可能
    - 変数を使ったプロパティアクセスができる
    - ↑のようなことをしたいときだけこっちを使う
- Rubyと同じように追加や上書きができる

## メソッドの定義
```js
const オブジェクト名 = {
  メソッド名: 関数式
}
```

## メソッドの呼び出し
```js
オブジェクト名.メソッド名(あれば引数)
```

## メソッド内で使う`this`
- Rubyでいう`self`と同じで、呼び出しているオブジェクトそのもの

## confirm
- windowオブジェクトのメソッドの一つ
- 確認ダイアログを表示し、OKなら`true`を、キャンセルなら`false`を戻り値として返す
- ユーザーがどちらかのボタンを押すまでJavaScriptの処理は止まる

## イベントオブジェクト
- `addEventListener`に登録した関数に自動で渡される特殊オブジェクト
- イベントに関する様々な情報をプロパティとして持っている
  - currentTarget：イベントが発生した要素（厳密には`addEventListener`を設定した要素）を格納しているプロパティ
  - target：設定したイベントが発生した要素

## なんでもメモ
- `typeof 値`で値のデータ型を返す
- Dateオブジェクトを利用して月を扱う場合、1〜12ではなく0〜11で表すので注意
- JavaScriptをHTMLの中で使う場合、`<body>`の閉じタグの直前に書くことが推奨されている（HTMLの要素に依存している場合読み込み終わってから出ないと正常に動かないため）
  - `DOMContentLoaded`というイベントを使えば、ブラウザがHTMLをすべて読み込んだ時点でJavaScriptを発火させることができるので、記述位置を気にする必要がなくなる
- 特定のJavaScriptの機能がどのブラウザで対応されているか確認したい場合は、[Can I use](https://caniuse.com/) というサイトを利用すると良い
- `removeEventLister`は引数として関数名を指定する必要があるため、`addEventLister`の引数を関数式で渡している場合は使えない。イベント削除がしたければ、関数式を渡すのではなく別途関数を定義してから関数名を渡して`add...`する必要がある
- イベントのリストを見たければ、 [MDNのイベントリファレンスページ](https://developer.mozilla.org/ja/docs/Web/Events) を参照すると良い